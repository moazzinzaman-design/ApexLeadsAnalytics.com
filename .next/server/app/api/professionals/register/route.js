"use strict";(()=>{var e={};e.id=568,e.ids=[568],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1847:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>x,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>f});var s={};t.r(s),t.d(s,{POST:()=>c});var a=t(9303),o=t(8716),l=t(3131),n=t(7070),i=t(7857);let u=()=>{let e=process.env.SUPABASE_SERVICE_ROLE_KEY||"sb_publishable_Adfac8wgmTp4BxgmTNMeQA_-wsNfEOu";return(0,i.eI)("https://rrckuurbdpdpvylaigvs.supabase.co",e)},p={London:{lat:51.5074,lon:-.1278},Birmingham:{lat:52.4862,lon:-1.8904},Manchester:{lat:53.4808,lon:-2.2446},Leeds:{lat:53.7965,lon:-1.5462},Glasgow:{lat:55.8642,lon:-4.2518},Liverpool:{lat:53.4084,lon:-2.9916},Newcastle:{lat:54.9783,lon:-1.6178},Sheffield:{lat:53.3811,lon:-1.4701},Bristol:{lat:51.4545,lon:-2.5879},Edinburgh:{lat:55.9533,lon:-3.1883},Cardiff:{lat:51.4816,lon:-3.1791},Belfast:{lat:54.5964,lon:-5.93},Nottingham:{lat:52.9536,lon:-1.1505},Southampton:{lat:50.9097,lon:-1.4044},Brighton:{lat:50.8276,lon:-.1525},Leicester:{lat:52.6347,lon:-1.1315},Oxford:{lat:51.7548,lon:-1.2544},Cambridge:{lat:52.2053,lon:.1218}};async function c(e){try{let{name:r,email:t,phone:s,business_name:a,category:o,city:l,postcode:i,hourly_rate:c,bio:d,subscription_tier:m="free"}=await e.json();if(!r||!t||!s||!o||!l||!i)return n.NextResponse.json({success:!1,error:"Please fill in all required fields"},{status:400});let f=u(),{data:g}=await f.from("profiles").select("id, email").eq("email",t.toLowerCase()).limit(1);if(g&&g.length>0)return n.NextResponse.json({success:!1,error:"An account with this email already exists"},{status:400});let h=p[l]||{lat:53,lon:-1},x=h.lat+(Math.random()-.5)*.1,v=h.lon+(Math.random()-.5)*.1,{data:y,error:_}=await f.from("profiles").insert({name:r,email:t.toLowerCase(),phone:s,business_name:a||null,category:o,city:l,postcode:i.toUpperCase(),latitude:x,longitude:v,hourly_rate:c||null,bio:d||null,subscription_tier:m,verified_status:!1,total_jobs_completed:0,years_experience:0,available_weekdays:!0,available_weekends:!1,emergency_calls:!1}).select().single();if(_)return console.error("Error creating profile:",_),n.NextResponse.json({success:!1,error:"Failed to create profile: "+_.message},{status:500});return n.NextResponse.json({success:!0,message:"Profile created successfully!",profile:{id:y.id,name:y.name,email:y.email,category:y.category,city:y.city}})}catch(e){return console.error("Registration error:",e),n.NextResponse.json({success:!1,error:"An error occurred during registration"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/professionals/register/route",pathname:"/api/professionals/register",filename:"route",bundlePath:"app/api/professionals/register/route"},resolvedPagePath:"/Users/moazzinzaman/Desktop/CODING AI/Apex Leads Analytics/app/api/professionals/register/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:f,serverHooks:g}=d,h="/api/professionals/register/route";function x(){return(0,l.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:f})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,564],()=>t(1847));module.exports=s})();